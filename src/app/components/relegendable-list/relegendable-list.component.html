<div class="mx-auto max-w-7xl grow flex-col px-8">
  <div
    class="container max-w-6xl grow flex-row flex-wrap items-center justify-center">
    <!-- controls for all relegendables -->
    <div
      class="mx-auto my-6 flex max-w-lg flex-grow basis-full flex-row gap-2 rounded-md bg-aquamarine-100 p-4 py-6 shadow print:hidden">
      <div class="flex flex-col gap-2">
        <app-checkbox-with-label
        [(checked)]="includeFrontLip"
        (checkedChange)="changeIncludeFrontLip()"
        [label]="'Include front lip'"></app-checkbox-with-label>

      <app-checkbox-with-label
        [(checked)]="lessNoticeableBorder"
        [label]="'Remove border'"></app-checkbox-with-label>

      <app-checkbox-with-label
        [(checked)]="boldLegends"
        [label]="'Bold legends'"></app-checkbox-with-label>

      <!-- <app-checkbox-with-label
        [(checked)]="invertColours"
        [label]="'Invert colours (white on black)'"></app-checkbox-with-label> -->
      </div>
      <div class="flex flex-col gap-2">
        <div class="flex flex-row items-start justify-start gap-4">
          <div class="flex flex-col">
            <div class="mb-0.5 text-xs italic text-cutty-sark-800">Position:</div>
            <app-position-picker
              [position]="legendPosition"
              (positionSelected)="onPositionSelected($event)">
            </app-position-picker>
          </div>
    
          <div class="flex h-full flex-col space-y-2">
            <div class="mb-0.5 -translate-x-1 text-xs italic text-cutty-sark-800">
              Text align:
            </div>
            <app-align-picker [(align)]="legendAlign">
            </app-align-picker>
          </div>
        </div>
    
        <div class="-mb-2 mt-1.5 text-xs italic text-cutty-sark-800">
          Font size:
        </div>
        <app-font-size-picker
          [(fontSize)]="legendFontSize"></app-font-size-picker>
    
        <!-- controls for the front lip -->
        <ng-container *ngIf="includeFrontLip">
          <div class="mt-1 mb-2 h-px w-full bg-cutty-sark-200"></div>
          <div class="-mt-2 flex flex-row items-center justify-center gap-0.5">
            <div class="flex flex-col">
              <div class="-mb-2 mt-2 text-xs italic text-cutty-sark-800">
                Font size:
              </div>
              <app-font-size-picker
                [(fontSize)]="frontLipLegendFontSize"
                [min]="3"
                [max]="10"></app-font-size-picker>
            </div>
    
            <div class="flex flex-col">
              <div class="mt-1 text-xs italic text-cutty-sark-800">Position:</div>
              <app-position-picker
                [position]="frontLipLegendPosition"
                [lip]="true"
                (positionSelected)="onLipPositionSelected($event)">
              </app-position-picker>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="flex flex-col gap-2">
        Background colour: [colour picker]
        Legend colour: [colour picker]
      </div>

    </div>

    <!-- print only: relegendable with sizing for measurement confirmation -->
    <div
      class="mt-16 -mb-2 hidden items-center justify-between px-12 print:flex">
      <div>
        <div class="prose">
          <p>For best results:</p>
          <ul class="ml-8 list-disc">
            <li>Use Google Chrome.</li>
            <li>Ensure print settings are for A4 paper size.</li>
            <li>Set print scaling to "Actual Size" or "100%".</li>
            <li>Measure the template to the right to ensure accuracy.</li>
            <li>Print in high resolution mode, not "draft".</li>
            <li>Disable headers and footers when printing.</li>
            <li>
              If you're printing white on black, enable "Background graphics".
            </li>
          </ul>
        </div>
      </div>
      <div
        class="m-2 inline-block h-cherry w-cherry scale-[2] select-none bg-white p-0 align-top shadow-none outline outline-1 outline-black print:w-cherry print:scale-100">
        <div class="h-full w-full overflow-clip">
          <div
            class="legend-10-5px absolute -bottom-0.5 ml-2 inline-block whitespace-pre-line">
            10<span class="legend-8-5px">mm</span>
          </div>
          <div
            class="legend-10-5px absolute -left-3.5 top-3.5 inline-block rotate-90 whitespace-pre-line">
            12.5<span class="legend-8-5px">mm</span>
          </div>
        </div>
      </div>
    </div>

    <app-relegendable
      class="print:float-left print:flex"
      *ngFor="let rel of relegendables"
      [relegendable]="rel"
      [lessNoticeableBorder]="lessNoticeableBorder"
      [boldLegends]="boldLegends"
      [invertColours]="invertColours"
      (delete)="delete(rel)"
      (clone)="clone(rel)">
    </app-relegendable>

    <span
      class="m-12 inline-block h-32 w-32 cursor-pointer select-none items-center rounded-md border border-cutty-sark-200 bg-cutty-sark-100 align-top shadow print:hidden"
      (click)="addNew()">
      <img src="./assets/img/plus.svg" class="m-12 h-8 w-8" />
    </span>
  </div>
</div>
